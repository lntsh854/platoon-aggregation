function concrete_controller(block)

  setup(block);
  
%endfunction

function setup(block)
  %% Register number of input and output ports
  block.NumInputPorts  = 3;
  block.NumOutputPorts = 2;

  %% Setup functional port properties to dynamically
  %% inherited.
  block.SetPreCompInpPortInfoToDynamic;
  block.SetPreCompOutPortInfoToDynamic;
 
  block.InputPort(1).Dimensions = 5;
  block.InputPort(1).DirectFeedthrough = false;
  block.InputPort(2).Dimensions = 2;
  block.InputPort(2).DirectFeedthrough = false;
  block.InputPort(3).Dimensions = 3;
  block.InputPort(3).DirectFeedthrough = false;
  
  block.OutputPort(1).Dimensions = 5;
  block.OutputPort(2).Dimensions = 2;
  
  %% Set block sample time to inherited
  block.SampleTimes = [-1 0];
  
  %% Set the block simStateCompliance to default (i.e., same as a built-in block)
  block.SimStateCompliance = 'DefaultSimState';

  %% Run accelerator on TLC
  block.SetAccelRunOnTLC(true);
  
  %% Register methods
  block.RegBlockMethod('SetInputPortSamplingMode', @SetInpPortFrameData);
  block.RegBlockMethod('Outputs',                 @Output);  
  block.RegBlockMethod('SetInputPortSamplingMode', @SetInpPortFrameData);
  
%endfunction

function SetInpPortFrameData(block, idx, fd)
  
  block.InputPort(idx).SamplingMode = fd;
  block.OutputPort(1).SamplingMode  = fd;
  block.OutputPort(2).SamplingMode  = fd;
  
%endfunction

function Output(block)

    %%% BLOCK INPUTS %%%
    x = block.InputPort(1).data; % state
    uhat = block.InputPort(2).data; % abstract input
    xhat = block.InputPort(3).data; % abstract state
    
    if(norm(x - zeros(5,1)) < 0.1)
        x = [0; 15; 0; 0; 0];
    end
    
    % define the error manifold, get the error
    P_1 = [eye(3); zeros(2,3)];
    P_2 = [zeros(3,2); eye(2)];
    err = x - (P_1*xhat + P_2*uhat);
    
    % map variables to new notation
    err_1 = err(1);
    err_2 = err(2);
    err_3 = err(3);
    err_4 = err(4);
    err_5 = err(5);
    % xhat_1 = xhat(1);
    % xhat_2 = xhat(2);
    xhat_3 = xhat(3);
    uhat_1 = uhat(1);
    % uhat_2 = uhat(2);
    
    K1 = -0.0001793898942937793*err_1^4 + 0.0001286649596679845*err_1^3*err_2  ...
  + 0.0003220245133657571*err_1^3*err_3 - 0.0003327615238042946*err_1^3 ...
  *err_4 + 1.971947562717926e-05*err_1^3*err_5 - 1.959523648299337*err_1^3 ...
  *uhat_1 + 0.6921508366089854*err_1^3*xhat_3 - 0.0002130271720124242 ...
  *err_1^2*err_2^2 + 0.0001160402642857993*err_1^2*err_2*err_3  ...
  + 0.0001592294051383132*err_1^2*err_2*err_4 + 3.044265049447367e-05 ...
  *err_1^2*err_2*err_5 + 0.2760994226687015*err_1^2*err_2*uhat_1  ...
  - 0.08897710793654462*err_1^2*err_2*xhat_3 + 0.0001088549559396369 ...
  *err_1^2*err_3^2 + 0.001037978670378978*err_1^2*err_3*err_4  ...
  + 0.0002682284440137831*err_1^2*err_3*err_5 - 0.01990116078173314 ...
  *err_1^2*err_3*uhat_1 + 0.006104170260792756*err_1^2*err_3*xhat_3  ...
  + 0.0003440139022806732*err_1^2*err_4^2 + 0.000226383520404459*err_1^2 ...
  *err_4*err_5 - 4.204559437552802*err_1^2*err_4*uhat_1  ...
  + 1.480036774019089*err_1^2*err_4*xhat_3 + 0.0001526292140185401*err_1^2 ...
  *err_5^2 - 0.008948418378054315*err_1^2*err_5*uhat_1  ...
  + 0.004487531403414834*err_1^2*err_5*xhat_3 + 3.572370152183178e-06 ...
  *err_1^2*uhat_1^2 - 0.0001144310167393899*err_1^2*uhat_1*xhat_3  ...
  + 2.916575307431056e-06*err_1^2*xhat_3^2 + 0.0001642415776431214*err_1 ...
  *err_2^3 + 8.25372409971113e-05*err_1*err_2^2*err_3  ...
  - 0.0004788838677364244*err_1*err_2^2*err_4 - 2.783915653909983e-05 ...
  *err_1*err_2^2*err_5 - 1.953416489120784*err_1*err_2^2*uhat_1  ...
  + 0.7461538246325042*err_1*err_2^2*xhat_3 - 3.686331987918445e-05*err_1 ...
  *err_2*err_3^2 + 0.0002896672083672564*err_1*err_2*err_3*err_4  ...
  - 1.87477000758449e-05*err_1*err_2*err_3*err_5 + 0.01145636347549946 ...
  *err_1*err_2*err_3*uhat_1 - 0.005992535775283715*err_1*err_2*err_3 ...
  *xhat_3 - 0.0001792222278394795*err_1*err_2*err_4^2 + 7.375417302432979e-05*err_1*err_2*err_4*err_5 - 0.4247195936596299*err_1*err_2*err_4 ...
  *uhat_1 + 0.1782957242764154*err_1*err_2*err_4*xhat_3  ...
  - 4.174327956016486e-05*err_1*err_2*err_5^2 - 0.07426553594335578*err_1 ...
  *err_2*err_5*uhat_1 + 0.03433022119362215*err_1*err_2*err_5*xhat_3  ...
  + 0.0001346037908646781*err_1*err_2*uhat_1^2 + 6.991829199973192e-05 ...
  *err_1*err_2*uhat_1*xhat_3 - 3.913046752515766e-05*err_1*err_2*xhat_3^2  ...
  + 0.0001672783324403506*err_1*err_3^3 + 0.0004354281470112639*err_1 ...
  *err_3^2*err_4 + 2.572973459774861e-05*err_1*err_3^2*err_5  ...
  - 1.90393161019306*err_1*err_3^2*uhat_1 + 0.7169856742991871*err_1 ...
  *err_3^2*xhat_3 + 0.000778339209830908*err_1*err_3*err_4^2  ...
  + 0.0002564005844498798*err_1*err_3*err_4*err_5 + 0.03305195832180338 ...
  *err_1*err_3*err_4*uhat_1 - 0.01368477039638388*err_1*err_3*err_4 ...
  *xhat_3 + 0.0005207287964612184*err_1*err_3*err_5^2 - 0.74658275939917 ...
  *err_1*err_3*err_5*uhat_1 + 0.3431831909757538*err_1*err_3*err_5*xhat_3  ...
  + 8.482079621655104e-05*err_1*err_3*uhat_1^2 - 0.0004218592483213123 ...
  *err_1*err_3*uhat_1*xhat_3 + 0.001387962030322175*err_1*err_3*xhat_3^2  ...
  - 0.000227374133428832*err_1*err_4^3 + 0.0001304255455589309*err_1 ...
  *err_4^2*err_5 + 1.692528656446457*err_1*err_4^2*uhat_1  ...
  - 0.7903107297674298*err_1*err_4^2*xhat_3 - 2.09937358100047e-05*err_1 ...
  *err_4*err_5^2 - 0.01608709979843699*err_1*err_4*err_5*uhat_1  ...
  + 0.007022260193667891*err_1*err_4*err_5*xhat_3 + 0.0002317943771770187 ...
  *err_1*err_4*uhat_1^2 - 0.0004312609795823957*err_1*err_4*uhat_1*xhat_3  ...
  + 4.015069894925821e-05*err_1*err_4*xhat_3^2 + 0.0001236016406648731 ...
  *err_1*err_5^3 - 0.330678318641527*err_1*err_5^2*uhat_1  ...
  + 0.0006461651950108799*err_1*err_5^2*xhat_3 + 2.095181886675715e-05 ...
  *err_1*err_5*uhat_1^2 - 0.0001086294683886771*err_1*err_5*uhat_1*xhat_3  ...
  + 0.0009785829439616844*err_1*err_5*xhat_3^2 - 6.685686774081237*err_1 ...
  *uhat_1^3 + 0.9025443636312774*err_1*uhat_1^2*xhat_3  ...
  - 0.6662584605902963*err_1*uhat_1*xhat_3^2 + 0.05772305166586178*err_1 ...
  *xhat_3^3 - 2.03740828493958e-05*err_2^4 - 2.372237972638384e-05*err_2^3 ...
  *err_3 + 0.0003503235742707563*err_2^3*err_4 + 2.653512250433618e-06 ...
  *err_2^3*err_5 + 0.308150123634232*err_2^3*uhat_1 - 0.1178990936199956 ...
  *err_2^3*xhat_3 - 7.022143061358535e-05*err_2^2*err_3^2  ...
  + 0.0002674606799026612*err_2^2*err_3*err_4 + 0.000279342031759288 ...
  *err_2^2*err_3*err_5 - 0.02418800788120844*err_2^2*err_3*uhat_1  ...
  + 0.009867218171960427*err_2^2*err_3*xhat_3 + 0.0001223104924627368 ...
  *err_2^2*err_4^2 + 6.306419641755628e-05*err_2^2*err_4*err_5  ...
  - 5.290563954898708*err_2^2*err_4*uhat_1 + 2.024887112674679*err_2^2 ...
  *err_4*xhat_3 + 9.471568017723153e-06*err_2^2*err_5^2  ...
  + 0.00786242569966757*err_2^2*err_5*uhat_1 - 0.005055322907736755 ...
  *err_2^2*err_5*xhat_3 + 1.27159205559077e-06*err_2^2*uhat_1^2  ...
  - 2.950809441797227e-05*err_2^2*uhat_1*xhat_3 + 1.186265815764013e-05 ...
  *err_2^2*xhat_3^2 + 1.991968318170546e-05*err_2*err_3^3  ...
  + 1.135139372669976e-05*err_2*err_3^2*err_4 + 1.3970562164226e-05*err_2 ...
  *err_3^2*err_5 + 0.2992949998168963*err_2*err_3^2*uhat_1  ...
  - 0.1124623849459822*err_2*err_3^2*xhat_3 - 0.0004083695009483314*err_2 ...
  *err_3*err_4^2 - 3.361161525134456e-05*err_2*err_3*err_4*err_5  ...
  + 0.01338076615937905*err_2*err_3*err_4*uhat_1 - 0.008125160902066431 ...
  *err_2*err_3*err_4*xhat_3 - 0.0001092665659089043*err_2*err_3*err_5^2  ...
  + 0.1177987132356978*err_2*err_3*err_5*uhat_1 - 0.05483277172655812 ...
  *err_2*err_3*err_5*xhat_3 + 5.79897837684367e-06*err_2*err_3*uhat_1^2  ...
  + 0.0001915912219520427*err_2*err_3*uhat_1*xhat_3 - 5.362394856592345e-05*err_2*err_3*xhat_3^2 + 0.0001035330745918661*err_2*err_4^3  ...
  - 9.135541822731703e-05*err_2*err_4^2*err_5 - 0.231233946218574*err_2 ...
  *err_4^2*uhat_1 + 0.1214030602011253*err_2*err_4^2*xhat_3  ...
  + 2.951363493592095e-05*err_2*err_4*err_5^2 - 0.140714424762334*err_2 ...
  *err_4*err_5*uhat_1 + 0.06406414443620384*err_2*err_4*err_5*xhat_3  ...
  + 0.0003126599982565829*err_2*err_4*uhat_1^2 + 0.0001795610559997279 ...
  *err_2*err_4*uhat_1*xhat_3 + 4.190708770738553e-05*err_2*err_4*xhat_3^2  ...
  - 3.220002268394675e-05*err_2*err_5^3 + 0.05186728933586667*err_2 ...
  *err_5^2*uhat_1 + 0.00159294878002706*err_2*err_5^2*xhat_3  ...
  - 6.113492378188428e-06*err_2*err_5*uhat_1^2 + 5.021737113320534e-05 ...
  *err_2*err_5*uhat_1*xhat_3 - 0.0001176074300526043*err_2*err_5*xhat_3^2  ...
  + 1.051592475599678*err_2*uhat_1^3 - 0.1419393355869599*err_2*uhat_1^2 ...
  *xhat_3 + 0.1051150276705862*err_2*uhat_1*xhat_3^2  ...
  - 0.008945849582952812*err_2*xhat_3^3 + 0.0004544674020164894*err_3^4 ... 
  - 0.008453663606759631*err_3^3*err_4 - 0.001689939146231753*err_3^3 ...
  *err_5 - 0.03184351498945195*err_3^3*uhat_1 + 0.01011595430079886 ...
  *err_3^3*xhat_3 - 8.962252514067105e-05*err_3^2*err_4^2  ...
  - 0.001212143175247773*err_3^2*err_4*err_5 - 5.248985361145389*err_3^2 ...
  *err_4*uhat_1 + 1.96012488752614*err_3^2*err_4*xhat_3  ...
  - 0.000171289237965126*err_3^2*err_5^2 - 0.009080337797115543*err_3^2 ...
  *err_5*uhat_1 - 0.001655311146567499*err_3^2*err_5*xhat_3  ...
  + 0.0002041438231174375*err_3^2*uhat_1^2 - 0.02663914074099388*err_3^2 ...
  *uhat_1*xhat_3 + 0.001558222607569645*err_3^2*xhat_3^2  ...
  + 0.0004458381875345369*err_3*err_4^3 + 0.0002265692323517882*err_3 ...
  *err_4^2*err_5 + 0.01729526096290812*err_3*err_4^2*uhat_1  ...
  - 0.008146546494500627*err_3*err_4^2*xhat_3 + 0.0002758942016029756 ...
  *err_3*err_4*err_5^2 - 1.376942216165377*err_3*err_4*err_5*uhat_1  ...
  + 0.620020666793323*err_3*err_4*err_5*xhat_3 + 0.0002188710335086906 ...
  *err_3*err_4*uhat_1^2 - 0.0008823235955700176*err_3*err_4*uhat_1*xhat_3  ...
  - 0.02437062974742694*err_3*err_4*xhat_3^2 + 0.0002595201543253992*err_3 ...
  *err_5^3 - 0.003866894244938525*err_3*err_5^2*uhat_1  ...
  - 0.0004170342298429438*err_3*err_5^2*xhat_3 - 0.0006600114068300521 ...
  *err_3*err_5*uhat_1^2 - 0.004280424230262325*err_3*err_5*uhat_1*xhat_3  ...
  - 0.005696302598878941*err_3*err_5*xhat_3^2 - 0.07914909119555248*err_3 ...
  *uhat_1^3 + 0.01137345445904172*err_3*uhat_1^2*xhat_3  ...
  - 0.03845000634881923*err_3*uhat_1*xhat_3^2 + 0.001081782614028324*err_3 ...
  *xhat_3^3 - 1.406122770397623e-05*err_4^4 + 8.706425467022095e-05 ...
  *err_4^3*err_5 - 3.607300740560022*err_4^3*uhat_1 + 0.7923461137107302 ...
  *err_4^3*xhat_3 - 2.892839446511e-05*err_4^2*err_5^2  ...
  + 0.004989768609499023*err_4^2*err_5*uhat_1 - 0.001818245895742309 ...
  *err_4^2*err_5*xhat_3 + 0.0007946808685446443*err_4^2*uhat_1^2  ...
  - 0.0005085313139793627*err_4^2*uhat_1*xhat_3 + 9.020928019581508e-05 ...
  *err_4^2*xhat_3^2 + 7.897622306292527e-05*err_4*err_5^3  ...
  - 2.18081219764764*err_4*err_5^2*uhat_1 + 0.5864356461312253*err_4 ...
  *err_5^2*xhat_3 + 5.937158162388353e-05*err_4*err_5*uhat_1^2  ...
  - 0.0003499515316276635*err_4*err_5*uhat_1*xhat_3 - 0.003003674456926999 ...
  *err_4*err_5*xhat_3^2 - 18.14153803696896*err_4*uhat_1^3  ...
  + 2.449219143821011*err_4*uhat_1^2*xhat_3 - 1.713950946561481*err_4 ...
  *uhat_1*xhat_3^2 + 0.1608100366805642*err_4*xhat_3^3  ...
  + 2.400401953606387e-05*err_5^4 - 0.0002406153287957302*err_5^3*uhat_1  ...
  - 2.495143175291495e-05*err_5^3*xhat_3 + 0.0001399323964598574*err_5^2 ...
  *uhat_1^2 - 0.001036658335527225*err_5^2*uhat_1*xhat_3  ...
  - 0.000710193146231993*err_5^2*xhat_3^2 - 0.001272573557221164*err_5 ...
  *uhat_1^3 - 0.0009723405150563754*err_5*uhat_1^2*xhat_3  ...
  - 0.005883874761460543*err_5*uhat_1*xhat_3^2 - 0.001856508119090103 ...
  *err_5*xhat_3^3 + 1.59463132161209e-06*uhat_1^4 - 6.151695351921206e-06 ...
  *uhat_1^3*xhat_3 - 0.0003393298558219122*uhat_1^2*xhat_3^2  ...
  - 0.0001029593772016403*uhat_1*xhat_3^3 - 1.195633857146868e-05 ...
  *xhat_3^4 - 4.884953071045766*err_1^3 + 0.6545946130912484*err_1^2 ...
  *err_2 - 0.04519335811008012*err_1^2*err_3 - 10.18502524089558*err_1^2 ...
  *err_4 - 0.03190162393330237*err_1^2*err_5 + 0.0007045587510621895 ...
  *err_1^2*uhat_1 + 0.0001703155427830368*err_1^2*xhat_3  ...
  - 5.069753852662186*err_1*err_2^2 + 0.03220976515728301*err_1*err_2 ...
  *err_3 - 1.251219445658804*err_1*err_2*err_4 - 0.2527811795186539*err_1 ...
  *err_2*err_5 - 0.0001572755933708799*err_1*err_2*uhat_1  ...
  + 0.0002478861285985975*err_1*err_2*xhat_3 - 4.97326754918444*err_1 ...
  *err_3^2 + 0.09677974324049346*err_1*err_3*err_4 - 2.551653343855885 ...
  *err_1*err_3*err_5 - 0.0001696809646778535*err_1*err_3*uhat_1  ...
  - 0.01359288344608205*err_1*err_3*xhat_3 + 5.871592954865654*err_1 ...
  *err_4^2 - 0.04889597629071875*err_1*err_4*err_5 + 0.003209521478038242 ...
  *err_1*err_4*uhat_1 - 3.153434154869733e-05*err_1*err_4*xhat_3  ...
  + 0.08660635547896474*err_1*err_5^2 - 0.0001009019766400015*err_1*err_5 ...
  *uhat_1 - 0.01000833019691289*err_1*err_5*xhat_3 - 3.139465614046864 ...
  *err_1*uhat_1^2 + 1.240759363574435*err_1*uhat_1*xhat_3  ...
  - 1.148105303600546*err_1*xhat_3^2 + 0.8003235020299743*err_2^3 ... 
  - 0.06536995024762225*err_2^2*err_3 - 13.73568045826528*err_2^2*err_4 ... 
  + 0.0373344264249106*err_2^2*err_5 - 1.318952505090471e-05*err_2^2 ...
  *uhat_1 - 3.567249094855514e-05*err_2^2*xhat_3 + 0.781516650583706*err_2 ...
  *err_3^2 + 0.01862024534832883*err_2*err_3*err_4 + 0.401726785760196 ...
  *err_2*err_3*err_5 - 0.0007739121404046628*err_2*err_3*uhat_1  ...
  + 0.002197345847419387*err_2*err_3*xhat_3 - 0.859755431016298*err_2 ...
  *err_4^2 - 0.4516677927815484*err_2*err_4*err_5 - 0.000315551816750889 ...
  *err_2*err_4*uhat_1 - 0.0009653489633985023*err_2*err_4*xhat_3  ...
  - 0.01043502138564438*err_2*err_5^2 - 0.000221532642247285*err_2*err_5 ...
  *uhat_1 + 0.001535812645832272*err_2*err_5*xhat_3 + 0.4938300182905891 ...
  *err_2*uhat_1^2 - 0.1964988946640644*err_2*uhat_1*xhat_3  ...
  + 0.1805660516966519*err_2*xhat_3^2 - 0.05921717085086451*err_3^3 ... 
  - 13.65902813658338*err_3^2*err_4 - 0.02963417377688674*err_3^2*err_5  ...
  + 0.165410593530608*err_3^2*uhat_1 + 0.0001576091469968079*err_3^2 ...
  *xhat_3 + 0.06279428396819692*err_3*err_4^2 - 4.417287816510642*err_3 ...
  *err_4*err_5 - 5.930595369803736e-05*err_3*err_4*uhat_1  ...
  + 0.2890690167274928*err_3*err_4*xhat_3 - 0.0006057817780907754*err_3 ...
  *err_5^2 + 0.02734427494831768*err_3*err_5*uhat_1 - 0.001320670639508428 ...
  *err_3*err_5*xhat_3 - 0.03689066180587468*err_3*uhat_1^2  ...
  + 0.3420294399688409*err_3*uhat_1*xhat_3 - 0.0135893799586637*err_3 ...
  *xhat_3^2 - 6.663613202812781*err_4^3 + 0.01661731157895501*err_4^2 ...
  *err_5 + 0.003332674870835451*err_4^2*uhat_1 - 0.0006506958296539412 ...
  *err_4^2*xhat_3 - 4.404397552331588*err_4*err_5^2 - 6.320859440435731e-05*err_4*err_5*uhat_1 + 0.03691785335776584*err_4*err_5*xhat_3  ...
  - 8.518051400689529*err_4*uhat_1^2 + 3.431367609884993*err_4*uhat_1 ...
  *xhat_3 - 2.896452109536701*err_4*xhat_3^2 + 0.001827932457537897 ...
  *err_5^3 + 0.00701875402437729*err_5^2*uhat_1 - 0.0004499028327893949 ...
  *err_5^2*xhat_3 - 0.001204394881910365*err_5*uhat_1^2  ...
  + 0.0530833468047632*err_5*uhat_1*xhat_3 - 0.001144088196227508*err_5 ...
  *xhat_3^2 - 4.776609650456769e-05*uhat_1^3 - 0.0001739564614098283 ...
  *uhat_1^2*xhat_3 + 0.0002988736536102726*uhat_1*xhat_3^2  ...
  - 7.763188309122382e-05*xhat_3^3 - 0.0002935845307287082*err_1^2 ... 
  + 0.0002236293884983722*err_1*err_2 - 0.002635777919174321*err_1*err_3 ... 
  - 0.0008094824050264363*err_1*err_4 - 0.00141248213659174*err_1*err_5  ...
  - 3.400512058047773*err_1*uhat_1 + 2.113698266543521*err_1*xhat_3  ...
  - 3.572080747872821e-05*err_2^2 + 0.0001483984905154779*err_2*err_3  ...
  + 0.0002246431845274547*err_2*err_4 + 0.0001795666927821548*err_2*err_5  ...
  + 0.5345845533515542*err_2*uhat_1 - 0.3328078559338754*err_2*xhat_3  ...
  - 0.002587632274323815*err_3^2 + 0.0477186151983655*err_3*err_4  ...
  + 0.009420648689496056*err_3*err_5 + 0.0144271103561468*err_3*uhat_1 ... 
  + 0.0221039788698543*err_3*xhat_3 - 1.757524630148301e-05*err_4^2  ...
  + 0.005763392485998838*err_4*err_5 - 9.220572267201455*err_4*uhat_1  ...
  + 5.82717331621909*err_4*xhat_3 + 0.0009205987780232497*err_5^2  ...
  + 0.008247609115556231*err_5*uhat_1 + 0.01048417477521128*err_5*xhat_3 ... 
  + 1.087019961744806e-05*uhat_1^2 + 0.0001992774607282593*uhat_1*xhat_3  ...
  - 9.910505901081335e-05*xhat_3^2 - 4.443549811971655*err_1  ...
  + 0.6988316500213675*err_2 - 0.05354308209369747*err_3  ...
  - 12.42531366265983*err_4 - 0.001766408994393197*err_5  ...
  + 2.046238637331728e-05*uhat_1 - 2.648863966731918e-05*xhat_3;

K2 = -2.045521770009785e-05*err_1^4 + 1.89746806364943e-05*err_1^3*err_2 ...
  + 0.0002336625462959616*err_1^3*err_3 - 6.721274308501326e-05*err_1^3 ...
  *err_4 - 0.0005227033865982987*err_1^3*err_5 + 0.01773137976010927 ...
  *err_1^3*uhat_1 - 0.006450436789148384*err_1^3*xhat_3  ...
  - 2.606529405526583e-05*err_1^2*err_2^2 - 0.0001052174048657815*err_1^2 ...
  *err_2*err_3 - 2.348287843210872e-06*err_1^2*err_2*err_4  ...
  + 0.000297178019703699*err_1^2*err_2*err_5 + 0.1345571415271904*err_1^2  ...
  *err_2*uhat_1 - 0.05018755249154227*err_1^2*err_2*xhat_3  ...
  - 0.0001885413492516238*err_1^2*err_3^2 + 0.00016261834199663*err_1^2  ...
  *err_3*err_4 + 0.0003226084707240856*err_1^2*err_3*err_5  ...
  + 1.299919894925062*err_1^2*err_3*uhat_1 - 0.4847185730977752*err_1^2  ...
  *err_3*xhat_3 - 3.304072915923796e-05*err_1^2*err_4^2  ...
  + 0.0002998404093328106*err_1^2*err_4*err_5 - 0.009021014508572265  ...
  *err_1^2*err_4*uhat_1 + 0.004638890846793414*err_1^2*err_4*xhat_3  ...
  + 5.046719602556751e-07*err_1^2*err_5^2 - 5.122270002715676*err_1^2  ...
  *err_5*uhat_1 + 1.931019005392061*err_1^2*err_5*xhat_3  ...
  - 5.231081357718102e-07*err_1^2*uhat_1^2 + 1.507838124068885e-05*err_1^2 ...
  *uhat_1*xhat_3 - 0.0001992198467716895*err_1^2*xhat_3^2  ...
  + 1.862554697548035e-05*err_1*err_2^3 + 0.0002216694150409646*err_1  ...
  *err_2^2*err_3 - 4.92689193449817e-05*err_1*err_2^2*err_4  ...
  - 0.000527184279763389*err_1*err_2^2*err_5 + 0.02029666162959536*err_1 ...
  *err_2^2*uhat_1 - 0.008674818865077403*err_1*err_2^2*xhat_3  ...
  - 0.0001145971935643221*err_1*err_2*err_3^2 + 3.942186020217317e-05 ...
  *err_1*err_2*err_3*err_4 + 0.0004650739895881598*err_1*err_2*err_3 ...
  *err_5 + 0.02848711039315904*err_1*err_2*err_3*uhat_1  ...
  - 0.01506827147254315*err_1*err_2*err_3*xhat_3 + 8.343564076385942e-06 ...
  *err_1*err_2*err_4^2 - 0.0001812840703979115*err_1*err_2*err_4*err_5  ...
  - 0.07569433676630627*err_1*err_2*err_4*uhat_1 + 0.03529017867491371 ...
  *err_1*err_2*err_4*xhat_3 + 0.0001329019917144*err_1*err_2*err_5^2  ...
  - 0.05068963368094739*err_1*err_2*err_5*uhat_1 + 0.02959070517504085 ...
  *err_1*err_2*err_5*xhat_3 + 1.613700681121362e-06*err_1*err_2*uhat_1^2  ...
  - 8.652100761260747e-07*err_1*err_2*uhat_1*xhat_3 + 5.88655280004714e-05 ...
  *err_1*err_2*xhat_3^2 + 0.0006599342235838046*err_1*err_3^3  ...
  + 3.955742460387241e-05*err_1*err_3^2*err_4 + 0.000460453228742141*err_1 ...
  *err_3^2*err_5 + 0.01614403697703369*err_1*err_3^2*uhat_1  ...
  - 0.003060790773689434*err_1*err_3^2*xhat_3 + 8.391531025189454e-05 ...
  *err_1*err_3*err_4^2 + 0.0004615674612942747*err_1*err_3*err_4*err_5  ...
  - 0.7429123789003361*err_1*err_3*err_4*uhat_1 + 0.3449670074178665*err_1 ...
  *err_3*err_4*xhat_3 + 0.0003268686552389425*err_1*err_3*err_5^2  ...
  + 0.02245507870844253*err_1*err_3*err_5*uhat_1 - 0.009592527586015118 ...
  *err_1*err_3*err_5*xhat_3 - 0.0001981307372608372*err_1*err_3*uhat_1^2  ...
  + 0.001020360333762652*err_1*err_3*uhat_1*xhat_3 + 0.002036534476513538 ...
  *err_1*err_3*xhat_3^2 - 6.315401423084556e-05*err_1*err_4^3  ...
  - 0.0002234627965806272*err_1*err_4^2*err_5 + 0.003593993364724908*err_1 ...
  *err_4^2*uhat_1 - 0.0004571379863555779*err_1*err_4^2*xhat_3  ...
  - 7.954686325931746e-06*err_1*err_4*err_5^2 + 1.741802582856804*err_1 ...
  *err_4*err_5*uhat_1 - 0.8081351857013872*err_1*err_4*err_5*xhat_3  ...
  - 5.072491465983733e-06*err_1*err_4*uhat_1^2 - 8.662981210082297e-06 ...
  *err_1*err_4*uhat_1*xhat_3 + 0.0007325087459907256*err_1*err_4*xhat_3^2  ...
  - 6.975227041518721e-06*err_1*err_5^3 - 0.016539650343177*err_1*err_5^2 ...
  *uhat_1 + 0.008160388403727186*err_1*err_5^2*xhat_3 - 9.210679485117325e-05*err_1*err_5*uhat_1^2 - 0.0001126476178884927*err_1*err_5*uhat_1 ...
  *xhat_3 + 0.0002506927456537727*err_1*err_5*xhat_3^2  ...
  + 0.06373585107056019*err_1*uhat_1^3 - 0.00908145960078509*err_1 ...
  *uhat_1^2*xhat_3 + 0.007130648502429027*err_1*uhat_1*xhat_3^2  ...
  + 0.0001521968272197948*err_1*xhat_3^3 - 1.004904110986992e-05*err_2^4 ... 
  - 0.0001057138370406109*err_2^3*err_3 + 2.735600682029038e-06*err_2^3 ...
  *err_4 + 0.0003625754999317413*err_2^3*err_5 + 0.1430041166547217 ...
  *err_2^3*uhat_1 - 0.05524524745154084*err_2^3*xhat_3  ...
  + 4.464586812588278e-05*err_2^2*err_3^2 + 0.0002340495883856917*err_2^2 ...
  *err_3*err_4 - 0.0001508403853950461*err_2^2*err_3*err_5  ...
  + 1.381055531298813*err_2^2*err_3*uhat_1 - 0.5337393207697658*err_2^2 ...
  *err_3*xhat_3 - 2.63349859335321e-06*err_2^2*err_4^2  ...
  + 0.0001501420371068887*err_2^2*err_4*err_5 + 0.008465053755445708 ...
  *err_2^2*err_4*uhat_1 - 0.005302340200061289*err_2^2*err_4*xhat_3  ...
  - 4.534123870586828e-05*err_2^2*err_5^2 - 5.242991180976877*err_2^2 ...
  *err_5*uhat_1 + 2.028275493937087*err_2^2*err_5*xhat_3  ...
  - 1.024051290110897e-05*err_2^2*uhat_1^2 - 3.84011388993067e-06*err_2^2 ...
  *uhat_1*xhat_3 - 2.767602880324639e-07*err_2^2*xhat_3^2  ...
  - 0.0001194149736030968*err_2*err_3^3 + 5.709639707644945e-05*err_2 ...
  *err_3^2*err_4 - 9.171855301393398e-07*err_2*err_3^2*err_5  ...
  + 0.1355293115589483*err_2*err_3^2*uhat_1 - 0.04827919637792766*err_2 ...
  *err_3^2*xhat_3 - 4.994040180294204e-05*err_2*err_3*err_4^2  ...
  - 0.0003106308083925874*err_2*err_3*err_4*err_5 + 0.1117782095089324 ...
  *err_2*err_3*err_4*uhat_1 - 0.05272422947763338*err_2*err_3*err_4 ...
  *xhat_3 - 9.428666846257441e-05*err_2*err_3*err_5^2 + 0.1479314952322361 ...
  *err_2*err_3*err_5*uhat_1 - 0.06418400175281097*err_2*err_3*err_5 ...
  *xhat_3 - 6.603517930512561e-05*err_2*err_3*uhat_1^2  ...
  - 0.0001160286864128774*err_2*err_3*uhat_1*xhat_3  ...
  - 0.0003997088895643727*err_2*err_3*xhat_3^2 + 1.144311402728501e-05 ...
  *err_2*err_4^3 + 0.0001163895183166996*err_2*err_4^2*err_5  ...
  + 0.02939350109522029*err_2*err_4^2*uhat_1 - 0.001800561152397525*err_2 ...
  *err_4^2*xhat_3 - 5.488875714307685e-05*err_2*err_4*err_5^2  ...
  - 0.2632876480668094*err_2*err_4*err_5*uhat_1 + 0.1243416972174486*err_2 ...
  *err_4*err_5*xhat_3 - 9.670702253263642e-06*err_2*err_4*uhat_1^2  ...
  + 8.972616985010844e-07*err_2*err_4*uhat_1*xhat_3  ...
  - 0.0001321918411602027*err_2*err_4*xhat_3^2 + 3.795531387382519e-05 ...
  *err_2*err_5^3 - 0.1303133964423281*err_2*err_5^2*uhat_1  ...
  + 0.06619142875830905*err_2*err_5^2*xhat_3 + 0.0003662904899264163*err_2 ...
  *err_5*uhat_1^2 + 0.0001428389857598253*err_2*err_5*uhat_1*xhat_3  ...
  - 0.0001266303486808434*err_2*err_5*xhat_3^2 + 0.4938579900169236*err_2 ...
  *uhat_1^3 - 0.06671196752007014*err_2*uhat_1^2*xhat_3  ...
  + 0.04887722296624521*err_2*uhat_1*xhat_3^2 - 0.004302748128840922*err_2 ...
  *xhat_3^3 + 7.800963321487565e-06*err_3^4 - 0.00221366115552267*err_3^3 ...
  *err_4 + 7.540068473684302e-05*err_3^3*err_5 + 1.380080578758448*err_3^3 ...
  *uhat_1 - 0.5123579295957784*err_3^3*xhat_3 + 0.001092816549693738 ...
  *err_3^2*err_4^2 + 0.0001291339336715921*err_3^2*err_4*err_5  ...
  - 0.00661424475120747*err_3^2*err_4*uhat_1 - 0.003459063733597807 ...
  *err_3^2*err_4*xhat_3 - 0.0003178586331220068*err_3^2*err_5^2  ...
  - 4.66774069959801*err_3^2*err_5*uhat_1 + 1.7270377577631*err_3^2*err_5 ...
  *xhat_3 - 4.386517268610374e-05*err_3^2*uhat_1^2 - 0.01230263023482549 ...
  *err_3^2*uhat_1*xhat_3 - 0.0008682300107537297*err_3^2*xhat_3^2  ...
  + 0.0002415091523978217*err_3*err_4^3 + 0.0004549922876711868*err_3 ...
  *err_4^2*err_5 + 0.2865434260159048*err_3*err_4^2*uhat_1  ...
  - 0.01779608064169667*err_3*err_4^2*xhat_3 + 0.0002078975970250194*err_3 ...
  *err_4*err_5^2 + 0.01825955258125557*err_3*err_4*err_5*uhat_1  ...
  - 0.007326088649402389*err_3*err_4*err_5*xhat_3 - 0.0007047449144861314 ...
  *err_3*err_4*uhat_1^2 + 0.002633904747291821*err_3*err_4*uhat_1*xhat_3  ...
  - 0.007392218849593004*err_3*err_4*xhat_3^2 + 0.0003210486592459699 ...
  *err_3*err_5^3 - 1.346437611365559*err_3*err_5^2*uhat_1  ...
  + 0.6465799380760379*err_3*err_5^2*xhat_3 + 0.000152924903498488*err_3 ...
  *err_5*uhat_1^2 - 0.002628067951791464*err_3*err_5*uhat_1*xhat_3  ...
  + 0.003271842571339394*err_3*err_5*xhat_3^2 + 4.778075533105565*err_3 ...
  *uhat_1^3 - 0.6461199939717275*err_3*uhat_1^2*xhat_3  ...
  + 0.4610154783061914*err_3*uhat_1*xhat_3^2 - 0.04071713027544622*err_3 ...
  *xhat_3^3 - 1.388415001299822e-05*err_4^4 - 5.147190093533647e-06 ...
  *err_4^3*err_5 - 8.987290828039982e-05*err_4^3*uhat_1  ...
  - 0.0001159469075858351*err_4^3*xhat_3 + 3.774823525461771e-06*err_4^2 ...
  *err_5^2 - 2.621842331019032*err_4^2*err_5*uhat_1 + 0.7612931585176685 ...
  *err_4^2*err_5*xhat_3 - 5.900645228149459e-06*err_4^2*uhat_1^2  ...
  - 0.0001383165949879605*err_4^2*uhat_1*xhat_3 + 0.003454302810636985 ...
  *err_4^2*xhat_3^2 - 4.266531427339358e-05*err_4*err_5^3  ...
  + 0.005132337237855888*err_4*err_5^2*uhat_1 - 0.001948162061144036*err_4 ...
  *err_5^2*xhat_3 + 0.0003967871855513941*err_4*err_5*uhat_1^2  ...
  + 0.0001581167578504606*err_4*err_5*uhat_1*xhat_3  ...
  + 0.0007425145831317489*err_4*err_5*xhat_3^2 - 0.0003237592421872835 ...
  *err_4*uhat_1^3 - 0.001215014653273981*err_4*uhat_1^2*xhat_3  ...
  + 0.002202685127133482*err_4*uhat_1*xhat_3^2 - 0.002402553546919648 ...
  *err_4*xhat_3^3 + 2.759247052082955e-05*err_5^4 - 3.341529653518708 ...
  *err_5^3*uhat_1 + 0.6855482838048094*err_5^3*xhat_3 + 1.818810727494336e-05*err_5^2*uhat_1^2 - 0.0004103851612358842*err_5^2*uhat_1*xhat_3  ...
  + 0.0009474517678405481*err_5^2*xhat_3^2 - 18.13156093526262*err_5 ...
  *uhat_1^3 + 2.451693869686738*err_5*uhat_1^2*xhat_3 - 1.702377330636812 ...
  *err_5*uhat_1*xhat_3^2 + 0.171068241908602*err_5*xhat_3^3  ...
  + 2.212399670829994e-07*uhat_1^4 - 1.825236027987008e-06*uhat_1^3 ...
  *xhat_3 - 1.923775281480476e-05*uhat_1^2*xhat_3^2 - 3.125316955077072e-05*uhat_1*xhat_3^3 - 1.079800948483432e-06*xhat_3^4  ...
  + 0.0461265346006703*err_1^3 + 0.3539973709719826*err_1^2*err_2  ...
  + 3.418840294113637*err_1^2*err_3 - 0.03333629085161714*err_1^2*err_4 ... 
  - 13.7149039532518*err_1^2*err_5 - 1.95672167214057e-05*err_1^2*uhat_1  ...
  + 0.002446333515615132*err_1^2*xhat_3 + 0.0576558424725487*err_1 ...
  *err_2^2 + 0.08950913136090638*err_1*err_2*err_3 - 0.2635139707809689 ...
  *err_1*err_2*err_4 - 0.1151499470318479*err_1*err_2*err_5  ...
  - 3.794536245895359e-05*err_1*err_2*uhat_1 - 0.0007609024273269025*err_1 ...
  *err_2*xhat_3 + 0.03760164314098099*err_1*err_3^2 - 2.599768220393383 ...
  *err_1*err_3*err_4 + 0.06582353603253631*err_1*err_3*err_5  ...
  - 0.006004565171001374*err_1*err_3*uhat_1 + 0.0005943305775529736*err_1 ...
  *err_3*xhat_3 + 0.002821389710413502*err_1*err_4^2 + 5.876857225713655 ...
  *err_1*err_4*err_5 - 2.828889426539229e-05*err_1*err_4*uhat_1  ...
  - 0.00791540318076649*err_1*err_4*xhat_3 - 0.06100146800037451*err_1 ...
  *err_5^2 + 0.001155370506740079*err_1*err_5*uhat_1  ...
  + 0.0006678943675232822*err_1*err_5*xhat_3 + 0.03022947405100697*err_1 ...
  *uhat_1^2 - 0.02362299741265536*err_1*uhat_1*xhat_3  ...
  + 0.01119575619850635*err_1*xhat_3^2 + 0.3757883539435506*err_2^3 ... 
  + 3.632259428036399*err_2^2*err_3 + 0.03928436593085399*err_2^2*err_4 ... 
  - 13.79358935215311*err_2^2*err_5 - 4.651167745573579e-08*err_2^2 ...
  *uhat_1 + 5.619503153289805e-05*err_2^2*xhat_3 + 0.3400983379643057 ...
  *err_2*err_3^2 + 0.3898573654560055*err_2*err_3*err_4  ...
  + 0.4473331022256601*err_2*err_3*err_5 + 0.0008899694327151195*err_2 ...
  *err_3*uhat_1 + 0.0006780138415052539*err_2*err_3*xhat_3  ...
  + 0.01321882675789506*err_2*err_4^2 - 0.8851850068526338*err_2*err_4 ...
  *err_5 - 7.944465514576887e-06*err_2*err_4*uhat_1 + 0.0013167325479888 ...
  *err_2*err_4*xhat_3 - 0.4755193113754018*err_2*err_5^2  ...
  + 1.246660289770404e-05*err_2*err_5*uhat_1 + 0.000453667132793989*err_2 ...
  *err_5*xhat_3 + 0.2363921287046086*err_2*uhat_1^2 - 0.09062439724894404 ...
  *err_2*uhat_1*xhat_3 + 0.08510752695651071*err_2*xhat_3^2  ...
  + 3.561169628283475*err_3^3 - 0.0294971516465292*err_3^2*err_4 ... 
  - 11.85249639524347*err_3^2*err_5 - 0.001744090208138795*err_3^2*uhat_1 ... 
  + 0.008083207043113343*err_3^2*xhat_3 + 0.0941175652179059*err_3 ...
  *err_4^2 + 0.05863596694309973*err_3*err_4*err_5 - 0.01529746407770318 ...
  *err_3*err_4*uhat_1 - 0.001648618835702235*err_3*err_4*xhat_3  ...
  - 4.757350147618571*err_3*err_5^2 + 0.0001666007531898961*err_3*err_5 ...
  *uhat_1 - 0.02778499234346851*err_3*err_5*xhat_3 + 2.286664428141647 ...
  *err_3*uhat_1^2 - 0.8980870178388901*err_3*uhat_1*xhat_3  ...
  + 0.8241546534980168*err_3*xhat_3^2 + 0.002578361968345561*err_4^3 ... 
  - 5.713062314740412*err_4^2*err_5 + 2.04719400701479e-05*err_4^2*uhat_1 ... 
  - 0.03948394478299706*err_4^2*xhat_3 + 0.01792726519619627*err_4 ...
  *err_5^2 - 0.0006188758371044773*err_4*err_5*uhat_1  ...
  - 0.0002109694607410298*err_4*err_5*xhat_3 - 0.0008974428321485556*err_4 ...
  *uhat_1^2 - 0.03163577420371436*err_4*uhat_1*xhat_3  ...
  - 0.001118338623020353*err_4*xhat_3^2 - 5.851343710208405*err_5^3  ...
  - 0.0001308124322864626*err_5^2*uhat_1 - 0.009506627289644916*err_5^2 ...
  *xhat_3 - 8.676410389100926*err_5*uhat_1^2 + 3.461023232430314*err_5 ...
  *uhat_1*xhat_3 - 3.071269492672061*err_5*xhat_3^2 - 7.652783470384505e-06*uhat_1^3 - 1.628194673128356e-05*uhat_1^2*xhat_3  ...
  - 5.915814689895376e-05*uhat_1*xhat_3^2 + 0.0001176127308442005 ...
  *xhat_3^3 + 0.0005898736014039895*err_1^2 - 0.0001462422015415121*err_1 ...
  *err_2 - 0.005031435930139911*err_1*err_3 - 0.0009880287788704947*err_1 ...
  *err_4 - 0.001323518497077834*err_1*err_5 + 0.03063446413455714*err_1 ...
  *uhat_1 - 0.02520974286674735*err_1*xhat_3 - 4.064875164892286e-06 ...
  *err_2^2 + 0.0008097914334117642*err_2*err_3 + 0.0002025198801742886 ...
  *err_2*err_4 + 0.0004754148191532952*err_2*err_5 + 0.2528621428121727 ...
  *err_2*uhat_1 - 0.1561973707536651*err_2*xhat_3 + 0.0007276574258833829 ...
  *err_3^2 + 0.01285223384265151*err_3*err_4 - 0.002766462114322861*err_3 ...
  *err_5 + 2.470701259784132*err_3*uhat_1 - 1.518417869354215*err_3 ...
  *xhat_3 - 0.00706278192541226*err_4^2 - 0.00115998940366724*err_4*err_5 ... 
  - 0.005541853542440751*err_4*uhat_1 + 0.01376281993984645*err_4*xhat_3  ...
  - 0.0008199780539396087*err_5^2 - 9.266173431001835*err_5*uhat_1  ...
  + 5.800975079555701*err_5*xhat_3 - 6.770082800088326e-08*uhat_1^2  ...
  - 4.197019006695069e-05*uhat_1*xhat_3 + 0.0001026346225763136*xhat_3^2 ... 
  + 0.04109644833599529*err_1 + 0.3295769561590888*err_2  ...
  + 3.186489865875888*err_3 - 0.0005471954522587148*err_4  ...
  - 11.82732292126579*err_5 - 9.327294055097277e-06*uhat_1  ...
  - 1.283911319052696e-05*xhat_3;

    block.OutputPort(1).Data = err;
    block.OutputPort(2).Data = [K1; K2];

%endfunction
